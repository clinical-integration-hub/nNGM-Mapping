/// version = 0.1
/// title = "nNGM: nNGM_Mapping_BefundCTS - FHIR to CTS"

map "http://uk-koeln.de/fhir/StructureMap/nNGM_Mapping_BefundCTS" = nNGM_Mapping_BefundCTS

uses "http://hl7.org/fhir/StructureDefinition/Bundle" as source
uses "http://hl7.org/fhir/StructureDefinition/CTS_Transport" as target

imports "http://uk-koeln.de/fhir/StructureMap/nNGM_Mapping_HistologieCTS"
imports "http://uk-koeln.de/fhir/StructureMap/nNGM_Mapping_MolekularpathologieCTS"
imports "http://uk-koeln.de/fhir/StructureMap/nNGM_Mapping_BeurteilungCTS"
imports "http://uk-koeln.de/fhir/StructureMap/nNGM_Mapping_NGSLungPanelCTS"
imports "http://uk-koeln.de/fhir/StructureMap/nNGM_Mapping_ImmunhistochemieCTS"

group MapBefundToCDS(source src: Bundle, target tgt: CTS_Transport)
{
    src -> tgt.version = '1.1';
    src -> tgt.sourcesystem = 'https:\/\/nngm-qat.staging.healex.systems\/';

    src -> tgt.operations as operations then TransformHistologieOperation(src, operations);
    src -> tgt.operations as operations then TransformImmunhistochemieOperation(src, operations);
    src -> tgt.operations as operations then TransformNGSLungPanelOperation(src, operations);
    src -> tgt.operations as operations then TransformMolekularpathologieOperation(src, operations);
    src -> tgt.operations as operations then TransformBeurteilungOperation(src, operations);
    
}